import{c as u,r as N,j as s,u as k,T as S,D as g,C as M}from"./index-D_ZcuIAW.js";import{C as T,S as $,T as I}from"./target-T5PpFNyO.js";import{H as _}from"./house-_gPa1W92.js";import{D as B,U as H}from"./users-csqP9Dnr.js";import{T as f}from"./trending-up-DsteDd4D.js";const D=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],y=u("building-2",D);const P=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],F=u("chevron-down",P);const R=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],w=u("dollar-sign",R);const q=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],A=u("rotate-ccw",q);const L=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],E=u("save",L);const O=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],U=u("upload",O),o=N.memo(({title:a,icon:t,children:i,defaultOpen:l=!0,badge:h=null})=>{const[c,x]=N.useState(l);return s.jsxs("div",{className:"admin-section",children:[s.jsxs("button",{className:"admin-section-header",onClick:()=>x(!c),children:[s.jsxs("div",{className:"admin-section-title",children:[t&&s.jsx(t,{className:"icon-md"}),s.jsx("span",{children:a}),h&&s.jsx("span",{className:"admin-section-badge",children:h})]}),c?s.jsx(F,{className:"icon-sm"}):s.jsx(T,{className:"icon-sm"})]}),c&&s.jsx("div",{className:"admin-section-content",children:i})]})});o.displayName="SettingsSection";const b=N.memo(({title:a,data:t,onChange:i,valuePrefix:l="$",valueLabel:h="金額"})=>{const c=[5,10,15],x=N.useCallback((n,m,r)=>{const j=parseInt(r,10)||0,d={...t};d[n]=[...t[n]],d[n][m]=j,i(d)},[t,i]),v=Math.max(...c.map(n=>t[n]?.length||0));return s.jsxs("div",{className:"bonus-table-editor",children:[s.jsx("h4",{className:"bonus-table-title",children:a}),s.jsx("div",{className:"bonus-table-container",children:s.jsxs("table",{className:"bonus-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"bonus-th-corner",children:"人數"}),Array.from({length:v},(n,m)=>s.jsx("th",{className:"bonus-th-index",children:m},m))]})}),s.jsx("tbody",{children:c.map(n=>s.jsxs("tr",{children:[s.jsxs("td",{className:"bonus-td-label",children:[n,"人班"]}),Array.from({length:v},(m,r)=>{const j=t[n]?.[r],d=r>=(t[n]?.length||0);return s.jsx("td",{className:`bonus-td-cell ${d?"disabled":""}`,children:!d&&s.jsxs("div",{className:"bonus-input-wrapper",children:[s.jsx("span",{className:"bonus-prefix",children:l}),s.jsx("input",{type:"number",value:j||0,onChange:e=>x(n,r,e.target.value),className:"bonus-input"})]})},r)})]},n))})]})}),s.jsxs("p",{className:"bonus-table-hint",children:["提示：表格中的 index 0 代表 0 人時的",h,"，依此類推"]})]})});b.displayName="BonusTableEditor";const V=()=>{const{settings:a,isDirty:t,updateSetting:i,updateNestedSetting:l,saveSettings:h,resetToDefaults:c,exportSettings:x,importSettings:v}=k(),n=N.useRef(null),m=()=>{n.current?.click()},r=async e=>{const p=e.target.files?.[0];if(p)try{await v(p),alert("設定匯入成功！")}catch(C){alert("匯入失敗："+C.message)}e.target.value=""},j=()=>{confirm("確定要重設所有設定為預設值嗎？此操作無法復原。")&&c()},d=e=>e?.toLocaleString("zh-TW")||"0";return s.jsxs("div",{className:"admin-container",children:[s.jsx("header",{className:"admin-header",children:s.jsxs("div",{className:"admin-header-content",children:[s.jsxs("div",{className:"admin-header-title",children:[s.jsx("a",{href:"/",className:"text-slate-400 hover:text-indigo-600 transition-colors flex items-center mr-2",title:"回首頁",children:s.jsx(_,{className:"icon-md"})}),s.jsx("div",{className:"admin-header-icon",children:s.jsx($,{className:"icon-md"})}),s.jsxs("div",{children:[s.jsx("h1",{children:"系統設定"}),s.jsx("p",{className:"admin-header-subtitle",children:"調整計算參數，變更將即時影響所有頁面"})]})]}),s.jsxs("div",{className:"admin-header-actions",children:[t&&s.jsxs("span",{className:"admin-dirty-badge",children:[s.jsx(S,{className:"icon-xs"})," 未儲存"]}),s.jsxs("button",{onClick:h,className:"admin-btn primary",children:[s.jsx(E,{className:"icon-sm"})," 儲存"]}),s.jsxs("button",{onClick:x,className:"admin-btn",children:[s.jsx(B,{className:"icon-sm"})," 匯出"]}),s.jsxs("button",{onClick:m,className:"admin-btn",children:[s.jsx(U,{className:"icon-sm"})," 匯入"]}),s.jsxs("button",{onClick:j,className:"admin-btn danger",children:[s.jsx(A,{className:"icon-sm"})," 重設"]}),s.jsx("input",{ref:n,type:"file",accept:".json",onChange:r,style:{display:"none"}})]})]})}),s.jsxs("main",{className:"admin-main",children:[s.jsx(o,{title:"核心財務參數",icon:w,badge:"高重要性",children:s.jsxs("div",{className:"admin-grid cols-2",children:[s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"正職底薪"}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("span",{className:"admin-input-prefix",children:"$"}),s.jsx("input",{type:"number",value:a.fullTimeBaseSalary,onChange:e=>i("fullTimeBaseSalary",parseInt(e.target.value)||0)})]}),s.jsxs("span",{className:"admin-field-hint",children:["預設: $",d(g.fullTimeBaseSalary)]})]}),s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"PT 基本時薪"}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("span",{className:"admin-input-prefix",children:"$"}),s.jsx("input",{type:"number",value:a.ptBaseHourlyRate,onChange:e=>i("ptBaseHourlyRate",parseInt(e.target.value)||0)})]}),s.jsxs("span",{className:"admin-field-hint",children:["預設: $",d(g.ptBaseHourlyRate)]})]}),s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"課程期數 (月)"}),s.jsx("input",{type:"number",step:"0.5",value:a.termMonths,onChange:e=>i("termMonths",parseFloat(e.target.value)||4.5)}),s.jsxs("span",{className:"admin-field-hint",children:["預設: ",g.termMonths," 個月"]})]}),s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"目標學員數"}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("input",{type:"number",value:a.goalStudents,onChange:e=>i("goalStudents",parseInt(e.target.value)||180)}),s.jsx("span",{className:"admin-input-suffix",children:"人"})]}),s.jsxs("span",{className:"admin-field-hint",children:["預設: ",g.goalStudents," 人"]})]})]})}),s.jsx(o,{title:"學費設定 (一期)",icon:f,badge:"高重要性",children:s.jsxs("div",{className:"admin-tuition-grid",children:[s.jsxs("div",{className:"admin-tuition-section",children:[s.jsx("h4",{children:"標準班"}),s.jsx("div",{className:"admin-grid cols-3",children:[5,10,15].map(e=>s.jsxs("div",{className:"admin-field",children:[s.jsxs("label",{children:[e,"人班"]}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("span",{className:"admin-input-prefix",children:"$"}),s.jsx("input",{type:"number",value:a.tuitionFees?.standard?.[e]||0,onChange:p=>l(`tuitionFees.standard.${e}`,parseInt(p.target.value)||0)})]})]},e))})]}),s.jsxs("div",{className:"admin-tuition-section",children:[s.jsx("h4",{children:"進階班"}),s.jsx("div",{className:"admin-grid cols-3",children:[5,10,15].map(e=>s.jsxs("div",{className:"admin-field",children:[s.jsxs("label",{children:[e,"人班"]}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("span",{className:"admin-input-prefix",children:"$"}),s.jsx("input",{type:"number",value:a.tuitionFees?.advanced?.[e]||0,onChange:p=>l(`tuitionFees.advanced.${e}`,parseInt(p.target.value)||0)})]})]},e))})]})]})}),s.jsx(o,{title:"正職獎金級距",icon:f,badge:"中重要性",defaultOpen:!1,children:s.jsx(b,{title:"依學生人數對應的額外獎金",data:a.fullTimeBonusMap,onChange:e=>i("fullTimeBonusMap",e),valueLabel:"獎金"})}),s.jsx(o,{title:"PT 時薪級距",icon:M,badge:"中重要性",defaultOpen:!1,children:s.jsx(b,{title:"依學生人數對應的動態時薪",data:a.ptHourlyMap,onChange:e=>i("ptHourlyMap",e),valueLabel:"時薪"})}),s.jsx(o,{title:"營運成本",icon:y,badge:"高重要性",children:s.jsxs("div",{className:"admin-grid cols-3",children:[s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"每月房租"}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("span",{className:"admin-input-prefix",children:"$"}),s.jsx("input",{type:"number",value:a.opsCosts?.rent||0,onChange:e=>l("opsCosts.rent",parseInt(e.target.value)||0)})]})]}),s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"貸款償還"}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("span",{className:"admin-input-prefix",children:"$"}),s.jsx("input",{type:"number",value:a.opsCosts?.loan||0,onChange:e=>l("opsCosts.loan",parseInt(e.target.value)||0)})]})]}),s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"行銷預算"}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("span",{className:"admin-input-prefix",children:"$"}),s.jsx("input",{type:"number",value:a.opsCosts?.marketing||0,onChange:e=>l("opsCosts.marketing",parseInt(e.target.value)||0)})]})]}),s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"PT 支援基數"}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("span",{className:"admin-input-prefix",children:"$"}),s.jsx("input",{type:"number",value:a.opsCosts?.ptSupportBase||0,onChange:e=>l("opsCosts.ptSupportBase",parseInt(e.target.value)||0)})]}),s.jsx("span",{className:"admin-field-hint",children:"每滿 30 人增加一位"})]}),s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"學員雜費/人"}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("span",{className:"admin-input-prefix",children:"$"}),s.jsx("input",{type:"number",value:a.opsCosts?.miscPerStudent||0,onChange:e=>l("opsCosts.miscPerStudent",parseInt(e.target.value)||0)})]})]})]})}),s.jsx(o,{title:"系統限制",icon:I,badge:"低重要性",defaultOpen:!1,children:s.jsxs("div",{className:"admin-grid cols-3",children:[s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"最大教師數"}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("input",{type:"number",value:a.maxTeachers,onChange:e=>i("maxTeachers",parseInt(e.target.value)||10)}),s.jsx("span",{className:"admin-input-suffix",children:"位"})]})]}),s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"單師班級上限"}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("input",{type:"number",value:a.maxClassesPerTeacher,onChange:e=>i("maxClassesPerTeacher",parseInt(e.target.value)||6)}),s.jsx("span",{className:"admin-input-suffix",children:"班"})]})]}),s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"工作負荷上限"}),s.jsxs("div",{className:"admin-input-group",children:[s.jsx("input",{type:"number",step:"0.5",value:a.maxWorkloadPoints,onChange:e=>i("maxWorkloadPoints",parseFloat(e.target.value)||3)}),s.jsx("span",{className:"admin-input-suffix",children:"點"})]})]}),s.jsxs("div",{className:"admin-field",children:[s.jsx("label",{children:"單日班係數"}),s.jsx("input",{type:"number",step:"0.1",value:a.frequencyMultiplier?.single||.5,onChange:e=>l("frequencyMultiplier.single",parseFloat(e.target.value)||.5)}),s.jsx("span",{className:"admin-field-hint",children:"全期班 = 1.0"})]})]})}),s.jsxs("div",{className:"admin-nav-links",children:[s.jsxs("a",{href:"?",className:"admin-nav-link",children:[s.jsx(H,{className:"icon-sm"})," 薪資計算器"]}),s.jsxs("a",{href:"?boss",className:"admin-nav-link",children:[s.jsx(y,{className:"icon-sm"})," Boss Dashboard"]})]})]}),s.jsx("footer",{className:"admin-footer",children:s.jsx("span",{children:"System Configuration Panel • v1.0 • localStorage persistence enabled"})})]})},Q=()=>s.jsx(V,{});export{Q as default};
